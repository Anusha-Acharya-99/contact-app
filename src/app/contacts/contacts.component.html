<div class="list-container">
  <div class="top-left-container" *ngIf="!addParticipants && !newGroup">
    <div class="profile">
      <img src="../../assets/profile.png" alt="" height="30px" width="30px" />
    </div>
    <img
      (click)="menuOpen = !menuOpen"
      class="icon"
      src="../../assets/options.png"
      alt=""
    />
  </div>
  <div class="top-left-container" *ngIf="addParticipants">
    <div class="profile">
      <img
        src="../../assets/leftArrow.png"
        alt=""
        height="30px"
        width="30px"
        class="left-arrow"
        (click)="clearSelected()"
      />
      Add participants
    </div>
  </div>
  <div class="top-left-container" *ngIf="newGroup">
    <div class="profile">
      <img
        src="../../assets/leftArrow.png"
        alt=""
        height="30px"
        width="30px"
        class="left-arrow"
        (click)="newGroup = false; addParticipants = true"
      />
      New group
    </div>
  </div>
  <div *ngIf="menuOpen" class="menu-container">
    <div class="menu-option" (click)="menuOpen = false">
      <a routerLink="/add-contact">Add contact</a>
    </div>
    <div class="menu-option">
      <a (click)="menuOpen = false; addParticipants = true">Create group</a>
    </div>
  </div>
  <div
    class="selected-contacts-container"
    *ngIf="addParticipants && selectedContacts.length !== 0"
  >
    <div
      *ngFor="let selectedContact of selectedContacts"
      class="selected-contacts"
    >
      {{ selectedContact.name }}
      <img
        src="../../assets/delete.png"
        class="delete-icon"
        alt=""
        (click)="selectContact(selectedContact)"
      />
    </div>
  </div>
  <div class="search-container" *ngIf="!newGroup">
    <app-contact-search
      (event)="getContactsBySearch($event)"
    ></app-contact-search>
  </div>
  <ul *ngIf="!newGroup">
    <li
      *ngFor="let contact of contacts"
      [ngClass]="contact.isChecked ? 'selected' : ''"
    >
      <div class="list-item">
        <img
          [src]="contact.image ? contact.image : imageUrl"
          alt=""
          height="40px"
          width="40px"
        />
        <input
          class="checkbox"
          type="checkbox"
          name="contact"
          value="{{ contact.id }}"
          #contact="ngModel"
          [(ngModel)]="contact.isChecked"
        />
        <div
          class="contact-name"
          (click)="
            addParticipants ? selectContact(contact) : navigate(contact.id)
          "
        >
          <span>{{ contact.name }}</span>
        </div>
        <img
          (click)="delete(contact.id)"
          class="hide"
          src="../../assets/delete2.png"
          alt=""
          width="22px"
          height="22px"
        />
      </div>
    </li>
  </ul>
  <div
    *ngIf="addParticipants && selectedContacts.length !== 0"
    class="next-arrow-container"
  >
    <img
      class="icon"
      src="../../assets/nextArrow.png"
      alt=""
      (click)="newGroup = true; addParticipants = false"
    />
  </div>
  <form
    *ngIf="newGroup"
    class="new-group-container"
    (ngSubmit)="onSubmit(); groupForm.reset()"
    #groupForm="ngForm"
  >
    <input
      type="file"
      name="groupIcon"
      id="groupIcon"
      (change)="previewImage($event)"
    />
    <img
      src="../../assets/profile.png"
      id="previewIcon"
      alt=""
      height="150px"
      width="150px"
    />
    <div>
      <label for="groupName">Group Name</label>
      <input
        id="name"
        name="name"
        [(ngModel)]="groupName"
        #name="ngModel"
        required
      />
      <small [hidden]="name.valid || name.untouched">Name is required</small>
    </div>
    <img
      src="../../assets/save.jpg"
      height="50px"
      width="50px"
      alt=""
      *ngIf="groupForm.form.valid"
      (click)="onSubmit()"
    />
  </form>
  <div class="no-content" *ngIf="contacts.length === 0">
    No contacts available
  </div>
</div>
